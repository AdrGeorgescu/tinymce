//
// Copyright (c) Tiny Technologies, Inc. All rights reserved.
// Licensed under the LGPL or a commercial license.
// For LGPL see License.txt in the project root for license information.
// For commercial licenses see https://www.tiny.cloud/
//

//
// Selection
//

@document-selection-color: initial;
@table-selection-color: #f2f8ff;
@table-selection-border-color: #007aff;
@object-block-selected-color: #b4d7ff;
@object-block-selected-outline-width: 3px;

.mce-content-body {
  // Define general selection color inside document
  *::selection {
    // Should be set in content/content.css. Selection does not work on Windows using high contrast mode with Firefox.
  }

  // Selection outline on certain editable objects
  img[data-mce-selected],
  video[data-mce-selected],
  audio[data-mce-selected],
  object[data-mce-selected],
  embed[data-mce-selected] {
    // TODO: This should only be removed whenever the new table UI isn't in use. How? Override this content css?
    // table[data-mce-selected] {
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
  }

  hr[data-mce-selected] {
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
    outline-offset: 1px;
  }

  // Selection outline on non editable elements
  *[contentEditable=false] *[contentEditable=true]:focus {
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
  }

  *[contentEditable=false] *[contentEditable=true]:hover {
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
  }

  *[contentEditable=false][data-mce-selected] {
    cursor: not-allowed;
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
  }

  &.mce-content-readonly {
    *[contentEditable=true]:focus,
    *[contentEditable=true]:hover {
      outline: none;
    }
  }

  // Styles for certain selected inline elements objects, like links.
  *[data-mce-selected="inline-boundary"] {
    background-color: @object-block-selected-color;
  }

  // Styles for a selected inline editable block
  .mce-edit-focus {
    outline: @object-block-selected-outline-width solid @object-block-selected-color;
  }

  // Selection of whole table cells
  td[data-mce-selected],
  th[data-mce-selected] {
    position: relative;

    &::selection {
      //Prevent selection to be visible
      background: none;
    }

    * {
      //Prevent selection of text to be visible inside cells
      outline: none;
      -webkit-touch-callout: none;
      user-select: none;
    }
  }

  .mce-table-overlay {
    bottom: -1px;
    content: '';
    left: -1px;
    position: absolute;
    right: -1px;
    top: -1px;
  }

  // Apply cell selection as a semi-transparent overlay instead of manipulating the cell background itself
  td[data-mce-selected]:not([data-mce-first-selected][data-mce-last-selected])::before,
  th[data-mce-selected]:not([data-mce-first-selected][data-mce-last-selected])::before {
    .mce-table-overlay;

    border: 1px solid @table-selection-border-color;
  }

  td[data-mce-selected]:not([data-mce-first-selected][data-mce-last-selected])::after,
  th[data-mce-selected]:not([data-mce-first-selected][data-mce-last-selected])::after {
    .mce-table-overlay;

    background-color: @table-selection-color;
    z-index: -1;
  }

  td[data-mce-selected][data-mce-first-selected][data-mce-last-selected]::after,
  th[data-mce-selected][data-mce-first-selected][data-mce-last-selected]::after {
    .mce-table-overlay;

    box-shadow: inset 0 0 0 2px #b4d7ff;
    z-index: -1;
  }

  img::selection {
    background: none;
  }
}

// Table border resizing handles
.ephox-snooker-resizer-bar {
  background-color: #007aff; // TODO: Probably use this for the default table mode as well
  opacity: 0;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;

  &:hover {
    opacity: 1;
  }
}

.ephox-snooker-resizer-cols {
  cursor: col-resize;
}

.ephox-snooker-resizer-rows {
  cursor: row-resize;
}

.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging {
  opacity: 1;
}
